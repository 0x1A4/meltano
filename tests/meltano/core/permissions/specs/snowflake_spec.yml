# Databases

analytics:
    type: database

raw:
    type: database

testing_db:
    type: database

# Roles

## Admin Roles
accountadmin:
    type: role
    warehouses:
        - loading
    member_of:
        - sysadmin

securityadmin:
    type: role
    warehouses:
        - loading
    member_of:
        - sysadmin


sysadmin:
    type: role
    warehouses:
        - loading
    privileges:
        databases:
            read:
                - raw
                - analytics
            write:
                - raw
                - analytics
        schemas:
            read:
                - raw.*
                - analytics.*
            write:
                - raw.*
                - analytics.*
        tables:
            read:
                - raw.*.*
                - analytics.*.*
            write:
                - raw.*.*
                - analytics.*.*

## Regular Roles
engineer:
    type: role
    member_of:
        - sysadmin
    warehouses:
        - loading
    privileges:
        databases:
            read:
                - raw
                - analytics
            write:
                - raw
                - analytics
        schemas:
            read:
                - raw.*
                - analytics.*
            write:
                - raw.*
                - analytics.*
        tables:
            read:
                - raw.*.*
                - analytics.*.*
            write:
                - raw.*.*
                - analytics.*.*

loader:
    type: role
    warehouses:
        - loading
    owns:
        schemas:
            - raw.*
            - testing_db.*
        tables:
            - raw.*.*
            - testing_db.*.*
    privileges:
        databases:
            read:
                - raw
                - testing_db
            write:
                - raw
                - testing_db
        schemas:
            read:
                - raw.*
                - testing_db.*
            write:
                - raw.*
                - testing_db.*
        tables:
            read:
                - raw.*.*
                - testing_db.*.*
            write:
                - raw.*.*
                - testing_db.*.*

reporter:
    type: role
    warehouses:
        - reporting
    privileges:
        databases:
            read:
                - analytics
        schemas:
            read:
                - analytics.*
        tables:
            read:
                - analytics.*.*

transformer:
    type: role
    warehouses:
        - transforming
    owns:
        schemas:
            - analytics.*
        tables:
            - analytics.*.*
    privileges:
        databases:
            read:
                - raw
                - analytics
            write:
                - analytics
        schemas:
            read:
                - raw.*
            write:
                - analytics.*
        tables:
            read:
                - raw.*.*
            write:
                - analytics.*.*

# User Roles
eburke_role:
    type: role
    warehouses:
        - reporting
    owns:
        schemas:
            - analytics.eburke_scratch

eeastwood_role:
    type: role
    warehouses:
        - reporting
    owns:
        schemas:
            - analytics.eeastwood_scratch

gitlab-ci_role:
    type: role
    warehouses:
        - reporting

looker_role:
    type: role
    warehouses:
        - reporting
    owns:
        schemas:
            - analytics.looker_scratch

iroussos_role:
    type: role
    warehouses:
        - reporting
    owns:
        schemas:
            - analytics.iroussos_scratch

target_snowflake_role:
    type: role
    warehouses:
        - reporting
    owns:
        schemas:
            - testing_db.target_snowflake

tlapiana_role:
    type: role
    warehouses:
        - reporting
    owns:
        schemas:
            - analytics.tlapiana_scratch

tmurphy_role:
    type: role
    warehouses:
        - reporting
    owns:
        schemas:
            - analytics.tmurphy_scratch

tszuromi_role:
    type: role
    warehouses:
        - reporting
    owns:
        schemas:
            - analytics.tszuromi_scratch

# Users

eburke:
    type: user
    can_login: yes
    member_of:
        - sysadmin
        - transformer
        - eburke_role
       
eeastwood:
    type: user
    can_login: yes
    member_of:
        - transformer
        - eeastwood_role

gitlab-ci:
    type: user
    can_login: yes
    member_of:
        - loader
        - reporter
        - sysadmin
        - transformer
        - gitlab-ci_role

looker:
    type: user
    can_login: yes
    member_of:
        - reporter
        - looker_role

iroussos:
    type: user
    can_login: yes
    member_of:
        - engineer
        - loader
        - transformer
        - sysadmin
        - iroussos_role

target_snowflake:
    type: user
    can_login: yes
    member_of:
        - loader
        - target_snowflake_role

tlapiana:
    type: user
    can_login: yes
    member_of:
        - engineer
        - loader
        - transformer
        - sysadmin
        - tlapiana_role

tmurphy:
    type: user
    can_login: yes
    member_of:
        - accountadmin
        - engineer
        - sysadmin
        - transformer
        - tmurphy_role

tszuromi:
    type: user
    can_login: yes
    member_of:
        - reporter
        - tszuromi_role


# Warehouses

loading:
    type: warehouse
    size: x-small

reporting:
    type: warehouse
    size: x-small

transforming:
    type: warehouse
    size: x-small