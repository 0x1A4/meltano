# Databases

analytics:
    type: database

raw:
    type: database

testing_db:
    type: database

# Roles

## Admin Roles
accountadmin:
    type: role
    warehouses:
        - loading
    member_of:
        - sysadmin

securityadmin:
    type: role
    warehouses:
        - loading
    member_of:
        - sysadmin


sysadmin:
    type: role
    warehouses:
        - loading
    privileges:
        databases:
            read:
                - raw
                - analytics
            write:
                - raw
                - analytics
        schemas:
            read:
                - raw.*
                - analytics.*
            write:
                - raw.*
                - analytics.*
        tables:
            read:
                - raw.*.*
                - analytics.*.*
            write:
                - raw.*.*
                - analytics.*.*
## User Roles
engineer:
    type: role
    member_of:
        - sysadmin
    warehouses:
        - loading
    privileges:
        databases:
            read:
                - raw
                - analytics
            write:
                - raw
                - analytics
        schemas:
            read:
                - raw.*
                - analytics.*
            write:
                - raw.*
                - analytics.*
        tables:
            read:
                - raw.*.*
                - analytics.*.*
            write:
                - raw.*.*
                - analytics.*.*

loader:
    type: role
    warehouses:
        - loading
    owns:
        schemas:
            - raw.*
            - testing_db.*
        tables:
            - raw.*.*
            - testing_db.*.*
    privileges:
        databases:
            read:
                - raw
                - testing_db
            write:
                - raw
                - testing_db
        schemas:
            read:
                - raw.*
                - testing_db.*
            write:
                - raw.*
                - testing_db.*
        tables:
            read:
                - raw.*.*
                - testing_db.*.*
            write:
                - raw.*.*
                - testing_db.*.*


reporter:
    type: role
    warehouses:
        - reporting
    privileges:
        databases:
            read:
                - analytics
        schemas:
            read:
                - analytics.*
        tables:
            read:
                - analytics.*.*

transformer:
    type: role
    warehouses:
        - transforming
    owns:
        schemas:
            - analytics.*
        tables:
            - analytics.*.*
    privileges:
        databases:
            read:
                - raw
                - analytics
            write:
                - analytics
        schemas:
            read:
                - raw.*
            write:
                - analytics.*
        tables:
            read:
                - raw.*.*
            write:
                - analytics.*.*


# Users

eburke:
    type: user
    can_login: yes
    member_of:
        - sysadmin
        - transformer
    owns:
        schemas:
            - analytics.eburke_scratch

eeastwood:
    type: user
    can_login: yes
    member_of:
        - transformer
    owns:
        schemas:
            - analytics.eeastwood_scratch

gitlab-ci:
    type: user
    can_login: yes
    member_of:
        - loader
        - reporter
        - sysadmin
        - transformer

looker:
    type: user
    can_login: yes
    member_of:
        - reporter
    owns:
        schemas:
            - analytics.looker_scratch

iroussos:
    type: user
    can_login: yes
    member_of:
        - engineer
        - loader
        - transformer
        - sysadmin
    owns:
        schemas:
            - analytics.iroussos_scratch


target_snowflake:
    type: user
    can_login: yes
    member_of:
        - loader
    owns:
        schemas:
            - testing_db.target_snowflake


tlapiana:
    type: user
    can_login: yes
    member_of:
        - engineer
        - loader
        - transformer
        - sysadmin
    owns:
        schemas:
            - analytics.tlapiana_scratch


tmurphy:
    type: user
    can_login: yes
    member_of:
        - accountadmin
        - engineer
        - sysadmin
        - transformer
    owns:
        schemas:
            - analytics.tmurphy_scratch


tszuromi:
    type: user
    can_login: yes
    member_of:
        - reporter
    owns:
        schemas:
            - analytics.tszuromi_scratch


# Warehouses

loading:
    type: warehouse
    size: x-small

reporting:
    type: warehouse
    size: x-small

transforming:
    type: warehouse
    size: x-small